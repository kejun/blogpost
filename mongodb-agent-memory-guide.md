# ä»€ä¹ˆæ˜¯ Agent Memoryï¼Ÿå¢å¼º AI å­¦ä¹ ä¸è®°å¿†çš„å®Œæ•´æŒ‡å—

> æ·±å…¥è§£æ MongoDB å®˜æ–¹å®šä¹‰ï¼Œæ¢ç´¢å¦‚ä½•ä¸º AI Agent æ„å»ºé«˜æ•ˆçš„è®°å¿†ç³»ç»Ÿ

---

## ä¸€ã€é‡æ–°å®šä¹‰ï¼šAgent Memory æ˜¯ä»€ä¹ˆ

### 1.1 å®˜æ–¹å®šä¹‰

**Agent Memoryï¼ˆæ™ºèƒ½ä½“è®°å¿†ï¼‰åŠå…¶ç®¡ç†ï¼Œæ˜¯ AI Agent çš„ã€Œè®¤çŸ¥å¤–éª¨éª¼ã€**â€”â€”ä¸€ä¸ªåŠ¨æ€çš„ã€ç³»ç»ŸåŒ–çš„è¿‡ç¨‹ã€‚

å®ƒå°† Agent çš„ LLM è®°å¿†ï¼ˆä¸Šä¸‹æ–‡çª—å£å’Œå‚æ•°æƒé‡ï¼‰ä¸æŒä¹…åŒ–è®°å¿†ç®¡ç†ç³»ç»Ÿç›¸é›†æˆï¼Œç”¨äº**ç¼–ç ã€å­˜å‚¨ã€æ£€ç´¢å’Œé€‰æ‹©æ€§åœ°é—å¿˜ä¿¡æ¯**ã€‚

ç®€å•æ¥è¯´ï¼š

- **LLM æœ¬èº«**ï¼šè´Ÿè´£å¤„ç†ä¿¡æ¯å’Œç”Ÿæˆå“åº”
- **Agent Memory**ï¼šä½œä¸ºæŒä¹…åŒ–åŸºåº§ï¼Œç§¯ç´¯çŸ¥è¯†ã€è·¨ä¼šè¯ä¿æŒä¸Šä¸‹æ–‡ã€æ ¹æ®å†å²æ¨¡å¼å®ç°è¡Œä¸ºé€‚åº”

### 1.2 ä¸ºä»€ä¹ˆ Agent Memory æ˜¯æ¸¸æˆè§„åˆ™æ”¹å˜è€…

åœ¨ LLM å‡ºç°ä¹‹å‰ï¼ŒAI ç³»ç»Ÿæ˜¯ç¡®å®šæ€§çš„ â€”â€” ç›¸åŒçš„è¾“å…¥æ€»æ˜¯äº§ç”Ÿç›¸åŒçš„è¾“å‡ºã€‚

ç°åœ¨ï¼ŒLLM å¸¦æ¥äº†æ¦‚ç‡æ€§ï¼Œä½†**åŸå§‹çš„ LLM æ˜¯æ— çŠ¶æ€çš„** â€”â€” æ¯æ¬¡äº¤äº’éƒ½æ˜¯ä»é›¶å¼€å§‹ã€‚

è¿™å¯¼è‡´äº†æ ¹æœ¬æ€§çš„é—®é¢˜ï¼š

```
ç”¨æˆ·ï¼š"æˆ‘ä»¬ä¸Šæ¬¡èŠåˆ°å“ªäº†ï¼Ÿ"
ä¼ ç»Ÿ LLMï¼š"æŠ±æ­‰ï¼Œæˆ‘ä¸çŸ¥é“æˆ‘ä»¬åœ¨èŠä»€ä¹ˆã€‚"
```

**Agent Memory è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚**

å®ƒä½¿ Agent èƒ½å¤Ÿï¼š
- âœ… è®°ä½è·¨ä¼šè¯çš„ä¸Šä¸‹æ–‡
- âœ… ç§¯ç´¯ç”¨æˆ·åå¥½å’Œä¹ æƒ¯
- âœ… ä»å†å²äº¤äº’ä¸­å­¦ä¹ 
- âœ… å®ç°çœŸæ­£çš„ä¸ªæ€§åŒ–ä½“éªŒ

---

## äºŒã€Agent Memory çš„æ ¸å¿ƒæ¶æ„

### 2.1 è®°å¿†çš„ä¸‰å±‚ç»“æ„

å€Ÿé‰´äººç±»å¤§è„‘çš„è®°å¿†ç³»ç»Ÿï¼ŒAgent Memory é€šå¸¸è¢«è®¾è®¡ä¸ºä¸‰å±‚ç»“æ„ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  é•¿æœŸè®°å¿† (Long-term)                â”‚
â”‚         æŒä¹…åŒ–å­˜å‚¨ï¼Œè·¨ä¼šè¯ä¿æŒï¼Œç”¨æˆ·åå¥½              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  çŸ­æœŸè®°å¿† (Short-term)              â”‚
â”‚         å•ä¼šè¯å†å²ï¼Œå½“å‰å¯¹è¯ä¸Šä¸‹æ–‡                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  å·¥ä½œè®°å¿† (Working)                 â”‚
â”‚          LLM ä¸Šä¸‹æ–‡çª—å£ï¼Œå³æ—¶å¤„ç†                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 MongoDB çš„è®°å¿†ç®¡ç†æ–¹æ¡ˆ

ä½œä¸ºåŒæ—¶æ”¯æŒå‘é‡æœç´¢å’Œæ–‡æ¡£å­˜å‚¨çš„æ•°æ®åº“ï¼ŒMongoDB Atlas æä¾›äº†ç‹¬ç‰¹çš„ Agent Memory è§£å†³æ–¹æ¡ˆï¼š

| èƒ½åŠ› | è¯´æ˜ |
|------|------|
| **å‘é‡æœç´¢** | è¯­ä¹‰æ£€ç´¢ç›¸ä¼¼å†…å®¹ |
| **æ–‡æ¡£å­˜å‚¨** | ç»“æ„åŒ–å­˜å‚¨äº¤äº’å†å² |
| **å†…å­˜è®¡ç®—** | åŠ é€Ÿæ•°æ®è®¿é—®ï¼Œå®ç°å®æ—¶å“åº” |
| **æ··åˆæœç´¢** | å‘é‡ + å…¨æ–‡æœç´¢ç»„åˆ |

### 2.3 è®°å¿†çš„ç”Ÿå‘½å‘¨æœŸ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æå–   â”‚ -> â”‚   ç¼–ç    â”‚ -> â”‚   å­˜å‚¨   â”‚ -> â”‚   æ£€ç´¢   â”‚
â”‚Extract   â”‚    â”‚ Encode   â”‚    â”‚ Store    â”‚    â”‚ Retrieve â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                              v
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚  é—å¿˜   â”‚
                                        â”‚Forget   â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰ã€MongoDB Atlas Vector Search æ·±åº¦è§£æ

### 3.1 æŠ€æœ¯æ¶æ„

MongoDB Atlas Vector Search æ˜¯ä¸º Agent Memory é‡èº«å®šåˆ¶çš„è§£å†³æ–¹æ¡ˆï¼š

**æ ¸å¿ƒèƒ½åŠ›ï¼š**
- æ”¯æŒ ANNï¼ˆè¿‘ä¼¼æœ€è¿‘é‚»ï¼‰æœç´¢
- é›†æˆäº MongoDB æ–‡æ¡£æ•°æ®åº“
- åŸç”Ÿæ”¯æŒå‘é‡ + æ ‡é‡æ··åˆæŸ¥è¯¢

**æŠ€æœ¯è§„æ ¼ï¼š**
- MongoDB v6.0.11ã€v7.0.2 æˆ–æ›´é«˜ç‰ˆæœ¬
- æ”¯æŒ 1536 ç»´åµŒå…¥å‘é‡
- ä½™å¼¦ç›¸ä¼¼åº¦ã€æ¬§å‡ é‡Œå¾—è·ç¦»ã€å†…ç§¯ä¸‰ç§åº¦é‡

### 3.2 å‘é‡ç´¢å¼•é…ç½®ç¤ºä¾‹

```javascript
// åˆ›å»ºå‘é‡ç´¢å¼•
db.runCommand({
  createIndexes: "embeddings",
  indexes: [{
    name: "vector_index",
    vector: {
      dimension: 1024,
      metric: "cosine"
    }
  }]
})
```

### 3.3 ä¸ºä»€ä¹ˆé€‰æ‹© MongoDB åš Agent Memoryï¼Ÿ

| ç»´åº¦ | MongoDB æ–¹æ¡ˆ | ç‹¬ç«‹å‘é‡æ•°æ®åº“ |
|------|--------------|--------------|
| **éƒ¨ç½²å¤æ‚åº¦** | å•å¹³å°ï¼Œç»Ÿä¸€ç®¡ç† | å¤šç³»ç»Ÿåè°ƒ |
| **æ•°æ®ä¸€è‡´æ€§** | å¼ºä¸€è‡´æ€§ | æœ€ç»ˆä¸€è‡´ |
| **æŸ¥è¯¢èƒ½åŠ›** | å‘é‡ + æ–‡æ¡£æ··åˆ | ä»…å‘é‡ |
| **æ‰©å±•æ€§** | è‡ªåŠ¨åˆ†ç‰‡ | éœ€é¢å¤–é…ç½® |
| **è¿ç»´æˆæœ¬** | ä½ | é«˜ |

**å…³é”®ä¼˜åŠ¿ï¼š** åœ¨åŒä¸€ä¸ªæ•°æ®åº“ä¸­å­˜å‚¨ Agent äº¤äº’å†å²ï¼Œæ— éœ€æ•°æ®åŒæ­¥

---

## å››ã€æ„å»º Agent Memory çš„å®æˆ˜æ–¹æ¡ˆ

### 4.1 ç³»ç»Ÿæ¶æ„è®¾è®¡

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚           Agent Application          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                 â–¼                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  å·¥ä½œè®°å¿†        â”‚ â”‚  çŸ­æœŸè®°å¿†        â”‚ â”‚  é•¿æœŸè®°å¿†        â”‚
        â”‚  (LLM Context)  â”‚ â”‚  (Session)       â”‚ â”‚  (Atlas)         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 MongoDB Atlas å­˜å‚¨æ–¹æ¡ˆ

**1. åµŒå…¥å‘é‡é›†åˆï¼ˆEmbeddings Namespaceï¼‰**

```javascript
// ai_agent_db.embeddings å‘½åç©ºé—´
{
  _id: ObjectId("..."),
  content: "ç”¨æˆ·ä¸Šæ¬¡è¯´å–œæ¬¢ç§‘å¹»ç”µå½±",
  embedding: [0.12, -0.45, 0.88, ...],  // 1024ç»´å‘é‡
  metadata: {
    userId: "user_123",
    sessionId: "session_456",
    timestamp: ISODate("2026-02-14T10:00:00Z"),
    type: "preference",  // preference, fact, context
    importance: 0.85
  }
}
```

**2. äº¤äº’å†å²é›†åˆï¼ˆInteractions Namespaceï¼‰**

```javascript
// ai_agent_db.interactions å‘½åç©ºé—´
{
  _id: ObjectId("..."),
  sessionId: "session_456",
  messages: [
    { role: "user", content: "æ¨èéƒ¨ç”µå½±" },
    { role: "assistant", content: "æ¨èã€Šæ˜Ÿé™…ç©¿è¶Šã€‹" },
    { role: "user", content: "å¤ªæ£’äº†ï¼Œæˆ‘çˆ±ç§‘å¹»" }
  ],
  summary: "ç”¨æˆ·å–œæ¬¢ç§‘å¹»ç”µå½±ï¼Œæ¨èäº†ã€Šæ˜Ÿé™…ç©¿è¶Šã€‹",
  createdAt: ISODate("2026-02-14T10:00:00Z")
}
```

### 4.3 è®°å¿†æ£€ç´¢å®ç°

**è¯­ä¹‰æ£€ç´¢ + è¿‡æ»¤æŸ¥è¯¢**

```javascript
// åŸºäºç”¨æˆ·æŸ¥è¯¢æ£€ç´¢ç›¸å…³è®°å¿†
const memories = await db.embeddings.aggregate([
  {
    $vectorSearch: {
      queryVector: queryEmbedding,
      path: "embedding",
      numCandidates: 100,
      limit: 10,
      filter: {
        userId: "user_123",
        timestamp: { $gte: thirtyDaysAgo }
      }
    }
  },
  {
    $project: {
      content: 1,
      metadata: 1,
      score: { $meta: "vectorSearchScore" }
    }
  }
])
```

### 4.4 è®°å¿†æ›´æ–°ç­–ç•¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è®°å¿†æ›´æ–°æµç¨‹                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. æ–°äº¤äº’å‘ç”Ÿ                                               â”‚
â”‚     â†“                                                       â”‚
â”‚  2. æå–å…³é”®ä¿¡æ¯ï¼ˆå®ä½“ã€åå¥½ã€äº‹å®ï¼‰                           â”‚
â”‚     â†“                                                       â”‚
â”‚  3. ç”ŸæˆåµŒå…¥å‘é‡                                             â”‚
â”‚     â†“                                                       â”‚
â”‚  4. ç›¸ä¼¼æ€§æ£€ç´¢ â†’ æ£€æµ‹å†²çª/é‡å¤                               â”‚
â”‚     â†“                                                       â”‚
â”‚  5. åˆå¹¶/æ›´æ–°/æˆ–åˆ›å»ºæ–°è®°å¿†                                   â”‚
â”‚     â†“                                                       â”‚
â”‚  6. æ ‡è®°ä½é‡è¦æ€§è®°å¿† â†’ è®¡åˆ’åˆ é™¤                              â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äº”ã€ä¼ä¸šçº§æœ€ä½³å®è·µ

### 5.1 è®°å¿†é€‰æ‹©ä¸é‡è¦æ€§åŠ æƒ

å¹¶éæ‰€æœ‰ä¿¡æ¯éƒ½åŒç­‰é‡è¦ï¼š

| è®°å¿†ç±»å‹ | ç¤ºä¾‹ | ä¿ç•™ç­–ç•¥ |
|----------|------|----------|
| **åå¥½** | ç”¨æˆ·å–œæ¬¢ç®€æ´çš„å›ç­” | é•¿æœŸä¿ç•™ï¼Œé«˜ä¼˜å…ˆçº§ |
| **äº‹å®** | ç”¨æˆ·å«å¼ ä¸‰ | é•¿æœŸä¿ç•™ï¼Œé«˜ä¼˜å…ˆçº§ |
| **ä¸Šä¸‹æ–‡** | å½“å‰é¡¹ç›®èƒŒæ™¯ | ä¼šè¯ç»“æŸè¯„ä¼° |
| **ä¸´æ—¶** | ä»Šå¤©å¤©æ°”ä¸é”™ | å¿«é€Ÿé—å¿˜ |

### 5.2 éšç§ä¸åˆè§„

**ä¼ä¸šé‡‡ç”¨ Agent Memory æ—¶å¿…é¡»è€ƒè™‘ï¼š**

- **æ•°æ®åŠ å¯†**ï¼šé™æ€æ•°æ® + ä¼ è¾“ä¸­æ•°æ®
- **è®¿é—®æ§åˆ¶**ï¼šåŸºäºè§’è‰²çš„æƒé™ç®¡ç†
- **åˆ é™¤åè®®**ï¼šGDPR åˆè§„çš„"è¢«é—å¿˜æƒ"
- **å®¡è®¡æ—¥å¿—**ï¼šè®°å½•æ‰€æœ‰è®°å¿†è®¿é—®

### 5.3 æ€§èƒ½ä¼˜åŒ–

**1. å‘é‡ç´¢å¼•ä¼˜åŒ–**

```javascript
// æŒ‰ä½¿ç”¨é¢‘ç‡åˆ†åŒº
{
  name: "vector_index_active",
  vector: { dimension: 1024, metric: "cosine" },
  ...searchOptions
}

// å®šæœŸå½’æ¡£æ—§æ•°æ®åˆ°å†·å­˜å‚¨
```

**2. æŸ¥è¯¢ä¼˜åŒ–**

```javascript
// ä½¿ç”¨å¤åˆç´¢å¼•åŠ é€Ÿè¿‡æ»¤
{
  indexes: [
    {
      keys: { userId: 1, type: 1, timestamp: -1 },
      name: "user_type_time_index"
    }
  ]
}
```

**3. ç¼“å­˜ç­–ç•¥**

```javascript
// Redis ç¼“å­˜é«˜é¢‘è®¿é—®è®°å¿†
const cachedMemories = await redis.get(`mem:${userId}:${queryHash}`);
if (cachedMemories) {
  return JSON.parse(cachedMemories);
}
// ... æŸ¥è¯¢ MongoDB åå†™å…¥ç¼“å­˜
```

---

## å…­ã€Agent Memory çš„æœªæ¥è¶‹åŠ¿

### 6.1 å½“å‰ä¸»æµæ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | ä»£è¡¨äº§å“ | ä¼˜åŠ¿ | å±€é™ |
|------|----------|------|------|
| **å‘é‡æ•°æ®åº“** | Pineconeã€Weaviate | è¯­ä¹‰æ£€ç´¢å¼º | ä»…å‘é‡ï¼Œæ— å¤æ‚æŸ¥è¯¢ |
| **å›¾æ•°æ®åº“** | Neo4j | å…³ç³»æ¨ç†å¼º | å¤æ‚ï¼Œå­¦ä¹ æ›²çº¿é™¡ |
| **MongoDB** | Atlas | å‘é‡+æ–‡æ¡£ä¸€ä½“åŒ– | æ–°å…´é¢†åŸŸ |

### 6.2 æ··åˆè®°å¿†æ¶æ„æ­£åœ¨èƒœå‡º

2026 å¹´çš„è¶‹åŠ¿æ˜¯ **"æ··åˆè®°å¿†"**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ··åˆè®°å¿†æ¶æ„                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚ è¯­ä¹‰å‘é‡ â”‚ +  â”‚ æ–‡æ¡£å­˜å‚¨ â”‚ +  â”‚  å›¾å…³ç³» â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚        â†“              â†“              â†“                      â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                       â†“                                     â”‚
â”‚              MongoDB Atlas (ä¸€ä½“åŒ–æ–¹æ¡ˆ)                       â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 è®°å¿†å³æœåŠ¡ï¼ˆMaaSï¼‰

æœªæ¥ï¼ŒAgent Memory å°†åƒäº‘å­˜å‚¨ä¸€æ ·æ™®åŠï¼š

```javascript
// æœªæ¥çš„è®°å¿†è°ƒç”¨æ–¹å¼
const memory = await MemoryService.create({
  type: "agent",
  retention: "user_lifetime",
  encryption: true,
  compliance: ["GDPR", "CCPA"]
});

// ç®€å•çš„ API è°ƒç”¨
await memory.store(userId, "ç”¨æˆ·åå¥½");
const context = await memory.recall(userId, query);
```

---

## ä¸ƒã€è½åœ°æ¸…å•ï¼šå¿«é€Ÿå¯åŠ¨ Agent Memory

### 7.1 å‰ææ¡ä»¶

- [ ] MongoDB Atlas é›†ç¾¤ï¼ˆv6.0.11+ æˆ– v7.0.2+ï¼‰
- [ ] OpenAI/Cohere/å…¶ä»–åµŒå…¥ API
- [ ] LLM APIï¼ˆç”¨äºæ‘˜è¦ç”Ÿæˆï¼‰

### 7.2 å®æ–½æ­¥éª¤

| é˜¶æ®µ | ä»»åŠ¡ | é¢„è®¡æ—¶é—´ |
|------|------|----------|
| **1. ç¯å¢ƒå‡†å¤‡** | åˆ›å»º Atlas é›†ç¾¤ï¼Œå¯ç”¨ Vector Search | 30 åˆ†é’Ÿ |
| **2. æ•°æ®å»ºæ¨¡** | è®¾è®¡è®°å¿† schema å’Œç´¢å¼• | 2 å°æ—¶ |
| **3. æ ¸å¿ƒå¼€å‘** | å®ç°å­˜å‚¨ã€æ£€ç´¢ã€æ›´æ–° API | 1-2 å¤© |
| **4. æµ‹è¯•ä¼˜åŒ–** | è°ƒä¼˜æ£€ç´¢å‚æ•°ï¼Œæ€§èƒ½æµ‹è¯• | 1 å¤© |
| **5. ä¸Šçº¿éƒ¨ç½²** | CI/CDï¼Œç›‘æ§å‘Šè­¦ | 4 å°æ—¶ |

### 7.3 å…³é”®é…ç½®å»ºè®®

```javascript
// ç”Ÿäº§ç¯å¢ƒé…ç½®å»ºè®®
const vectorSearchConfig = {
  numCandidates: 100,    // å€™é€‰æ•°é‡ï¼Œç²¾åº¦ä¸æ€§èƒ½å¹³è¡¡
  limit: 10,             // è¿”å›æ•°é‡
  minScore: 0.7,         // ç›¸ä¼¼åº¦é˜ˆå€¼
  filter: {
    // é»˜è®¤åªæ£€ç´¢è¿‘30å¤©è®°å¿†
    timestamp: { $gte: thirtyDaysAgo }
  }
};
```

---

## å…«ã€æ€»ç»“

**Agent Memory ä¸æ˜¯é­”æ³•ï¼Œè€Œæ˜¯å·¥ç¨‹ã€‚**

å®ƒéœ€è¦ï¼š

1. **æ¸…æ™°çš„æ•°æ®æ¨¡å‹** â€” ä»€ä¹ˆä¿¡æ¯å€¼å¾—å­˜å‚¨
2. **é«˜æ•ˆçš„æ£€ç´¢ç³»ç»Ÿ** â€” å¿«é€Ÿæ‰¾åˆ°ç›¸å…³å†…å®¹
3. **æ™ºèƒ½çš„é—å¿˜æœºåˆ¶** â€” é¿å…ä¿¡æ¯è¿‡è½½
4. **ä¸¥æ ¼çš„éšç§ä¿æŠ¤** â€” ä¼ä¸šçº§åˆè§„è¦æ±‚

MongoDB Atlas æä¾›äº†ç‹¬ç‰¹çš„**ä¸€ä½“åŒ–æ–¹æ¡ˆ**ï¼Œåœ¨åŒä¸€ä¸ªå¹³å°å®ç°å‘é‡æœç´¢å’Œæ–‡æ¡£å­˜å‚¨ï¼Œå¤§å¹…ç®€åŒ–äº† Agent Memory çš„å®æ–½å¤æ‚åº¦ã€‚

**ä¸‹ä¸€æ­¥ï¼š**

- ğŸ“– é˜…è¯» [MongoDB Atlas Vector Search å®˜æ–¹æ–‡æ¡£](https://www.mongodb.com/docs/atlas/atlas-vector-search/)
- ğŸ› ï¸ å°è¯• [Atlas AI Agents æ•™ç¨‹](https://www.mongodb.com/docs/atlas/atlas-vector-search/ai-agents/)
- ğŸ’¬ åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ Agent Memory ç»éªŒ

---

## å‚è€ƒèµ„æ–™

- [MongoDB: What Is Agent Memory?](https://www.mongodb.com/resources/basics/artificial-intelligence/agent-memory)
- [MongoDB Atlas Vector Search AI Agents](https://www.mongodb.com/docs/atlas/atlas-vector-search/ai-agents/)
- [MongoDB Vector Search Overview](https://www.mongodb.com/docs/atlas/atlas-vector-search/vector-search-overview/)
- [n8n Blog: AI Agent with MongoDB Atlas](https://blog.n8n.io/build-an-ai-agent-powered-by-mongodb-atlas-for-memory-and-vector-search/)

---

*æœ¬æ–‡åŒæ­¥å‘å¸ƒäº [seekdb-js](https://github.com/oceanbase/seekdb-js) æŠ€æœ¯åšå®¢ç³»åˆ—*

#AI #AgentMemory #MongoDB #VectorSearch #RAG #MachineLearning
