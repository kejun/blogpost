# 2026å¹´Agentè®°å¿†ç³»ç»Ÿæ¶æ„æ¼”è¿›ï¼šMastraã€OpenClawä¸æ··åˆæ£€ç´¢çš„èåˆ

**å‘å¸ƒæ—¥æœŸï¼š** 2026å¹´2æœˆ13æ—¥

---

## ä¸€ã€ä»RAGåˆ°Agentè®°å¿†ï¼šèŒƒå¼è½¬å˜

### 1.1 ä¼ ç»ŸRAGçš„å±€é™æ€§

è¿‡å»18ä¸ªæœˆï¼Œä¼ä¸šRAGå®ç°éµå¾ªå¯é¢„æµ‹çš„æ¨¡å¼ï¼šæ‘„å…¥æ–‡æ¡£ã€åˆ‡å—ã€å‘é‡åŒ–ã€å­˜å‚¨å‘é‡æ•°æ®åº“ã€æ£€ç´¢ç›¸å…³å—ã€ä¼ é€’ç»™LLMåˆæˆã€‚

è¿™ç§æ¨¡å¼åœ¨ç®€å•Q&Aåœºæ™¯æ•ˆæœå‡ºè‰²ï¼Œä½†åœ¨ä»¥ä¸‹åœºæ™¯ä¼šç¾éš¾æ€§å´©æºƒï¼š

| åœºæ™¯ | RAGé—®é¢˜ |
|------|---------|
| å¤šæ­¥éª¤æ¨ç† | ç¼ºä¹çŠ¶æ€è¿½è¸ª |
| å¤šæ•°æ®æºåè°ƒ | åªèƒ½å•ä¸€è·¯æ£€ç´¢ |
| åŠ¨æ€å†³ç­– | æ— æ³•æ ¹æ®ä¸­é—´ç»“æœè°ƒæ•´ |
| é•¿æœŸè®°å¿† | ä¸Šä¸‹æ–‡çª—å£é™åˆ¶ |

### 1.2 Agentè®°å¿†çš„æ–°éœ€æ±‚

2026å¹´çš„Agentéœ€è¦ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Agent è®°å¿†ç³»ç»Ÿéœ€æ±‚                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. çŸ­æœŸè®°å¿†ï¼šå¯¹è¯ä¸Šä¸‹æ–‡ã€ä»»åŠ¡çŠ¶æ€                   â”‚
â”‚  2. é•¿æœŸè®°å¿†ï¼šå†å²æ¨¡å¼ã€å­¦ä¹ è¡Œä¸º                      â”‚
â”‚  3. è·¨ä¼šè¯æŒä¹…åŒ–ï¼šé‡å¯ä¸å¤±å¿†                         â”‚
â”‚  4. å¯å®¡è®¡æ€§ï¼šéšæ—¶æ£€æŸ¥ã€ä¿®æ”¹ã€åˆ é™¤                   â”‚
â”‚  5. æˆæœ¬æ§åˆ¶ï¼šTokenå‹ç¼©ã€æ£€ç´¢æ•ˆç‡                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äºŒã€Mastra Observational Memoryï¼šSOTAæ–°èŒƒå¼

### 2.1 æ ¸å¿ƒåˆ›æ–°

Mastraçš„Observational Memoryåœ¨LongMemEvalåŸºå‡†ä¸Šè¾¾åˆ°**94.9%**ï¼ˆGPT-5-miniï¼‰ï¼Œ**84.2%**ï¼ˆGPT-4oï¼‰ã€‚

ä¸ä¼ ç»Ÿæ–¹æ¡ˆçš„æœ¬è´¨åŒºåˆ«ï¼š

| ä¼ ç»ŸRAG/å‘é‡/å›¾ | Observational Memory |
|-----------------|---------------------|
| æ£€ç´¢-å¢å¼ºç”Ÿæˆ | æŒç»­æ¼”åŒ–çš„æ–‡æœ¬è¡¨ç¤º |
| å¤–éƒ¨å‘é‡æ•°æ®åº“ | å†…ç½®è¡¨ç¤ºå­¦ä¹  |
| é™æ€chunk | åŠ¨æ€å‹ç¼©ç´¢å¼• |
| é«˜Tokenå¼€é”€ | å®Œå…¨å¯ç¼“å­˜çš„ä¸Šä¸‹æ–‡çª—å£ |

### 2.2 å…³é”®æŒ‡æ ‡å¯¹æ¯”

```python
# LongMemEval åŸºå‡†æµ‹è¯•ç»“æœ

results = {
    "Mastra (GPT-5-mini)": 0.9487,
    "Mastra (GPT-4o)": 0.8423,
    "Mastra RAG (baseline)": 0.8005,
    "Traditional RAG": "60-75%"
}

# æˆæœ¬å¯¹æ¯”
costs = {
    "Observational Memory": "1x (stable context)",
    "Traditional RAG": "~10x token overhead"
}
```

### 2.3 æŠ€æœ¯åŸç†æ¨æµ‹

åŸºäºå…¬å¼€ä¿¡æ¯ï¼ŒObservational Memoryçš„æ ¸å¿ƒå¯èƒ½æ˜¯ï¼š

1. **è¢«åŠ¨ä¸Šä¸‹æ–‡ï¼ˆPassive Contextï¼‰**
   - ä¸ä¸»åŠ¨æ£€ç´¢ï¼Œè€Œæ˜¯è§‚å¯ŸAgentçš„è¡Œä¸º
   - åŠ¨æ€åˆ¤æ–­å“ªäº›ä¿¡æ¯éœ€è¦è®°å¿†

2. **å‹ç¼©ç´¢å¼•ï¼ˆCompressed Indexingï¼‰**
   - æŒç»­æ¼”åŒ–çš„æ–‡æœ¬è¡¨ç¤º
   - é¿å…é‡å¤å­˜å‚¨ç›¸ä¼¼ä¿¡æ¯

3. **System-2è®¤çŸ¥æ§åˆ¶**
   - æ˜¾å¼ç›‘æ§"AgentçŸ¥é“ä»€ä¹ˆ"å’Œ"éœ€è¦çŸ¥é“ä»€ä¹ˆ"
   - ä¸»åŠ¨é—å¿˜ä¸é‡è¦ä¿¡æ¯

---

## ä¸‰ã€OpenClawæ¶æ„åˆ†æï¼šæ··åˆæ£€ç´¢çš„å®è·µ

### 3.1 æ ¸å¿ƒè®¾è®¡å“²å­¦

OpenClawçš„æ¶æ„ä¸Mastraå½¢æˆæœ‰è¶£çš„å¯¹æ¯”ï¼š

| ç»´åº¦ | Mastra | OpenClaw |
|------|--------|----------|
| å­˜å‚¨åç«¯ | å†…å­˜+å‹ç¼© | Markdownæ–‡ä»¶ |
| æ£€ç´¢æ–¹å¼ | è¢«åŠ¨è§‚å¯Ÿ | ä¸»åŠ¨æ··åˆæ£€ç´¢ |
| é€æ˜åº¦ | é»‘ç›’ | å®Œå…¨é€æ˜ |
| éƒ¨ç½²æ–¹å¼ | äº‘ç«¯ | æœ¬åœ°/è¾¹ç¼˜ |
| æŒä¹…åŒ– | å†…å­˜æŒä¹…åŒ– | æ–‡ä»¶ç³»ç»Ÿ |

### 3.2 OpenClawçš„æ··åˆæ£€ç´¢å®ç°

```python
# OpenClaw æ··åˆæ£€ç´¢æ ¸å¿ƒé€»è¾‘ï¼ˆç®€åŒ–ï¼‰

class HybridRetrieval:
    """
    æ··åˆæ£€ç´¢ï¼šBM25 + å‘é‡ç›¸ä¼¼åº¦
    
    ä¸ä¾èµ–é»‘ç›’å‘é‡æ•°æ®åº“ï¼Œ
    ç”¨å°ç´¢å¼•åœ¨Markdownæ–‡ä»¶ä¸Šæ£€ç´¢
    """
    
    def retrieve(self, query: str, intent: str):
        # 1. åˆ¤æ–­æ„å›¾
        if intent == "fact":
            # ç²¾ç¡®åŒ¹é…ä¼˜å…ˆ
            return self.bm25_search(query)
        elif intent == "reasoning":
            # å‘é‡æ£€ç´¢
            return self.vector_search(query)
        else:
            # æ··åˆèåˆ
            return self.fuse(
                self.bm25_search(query),
                self.vector_search(query)
            )
```

### 3.3 "ç£ç›˜æ˜¯ç¡¬ç›˜ã€ä¸Šä¸‹æ–‡æ˜¯ç¼“å­˜"å“²å­¦

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OpenClaw å­˜å‚¨æ¶æ„                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚           Context Window (LLM)           â”‚  â† ç¼“å­˜  â”‚
â”‚   â”‚      çƒ­æ•°æ®ï¼šå½“å‰ä¼šè¯å…³é”®ä¿¡æ¯             â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                         â†“ page in/out                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚         Memory (Markdownæ–‡ä»¶)             â”‚  â† æŒä¹…  â”‚
â”‚   â”‚      å†·æ•°æ®ï¼šå†å²è®°å¿†ã€åå¥½ã€äº‹å®         â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                         â”‚
â”‚   ç‰¹ç‚¹ï¼š                                                 â”‚
â”‚   - æ¯æ¬¡é‡å¯ä¸å¤±å¿†                                       â”‚
â”‚   - å¯ç”¨ä»»æ„ç¼–è¾‘å™¨æŸ¥çœ‹ã€ä¿®æ”¹                             â”‚
â”‚   - æ²¡æœ‰éšè—çŠ¶æ€                                        â”‚
â”‚   - Agentå¯ä¸»åŠ¨flushå…³é”®ç‚¹                              â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å››ã€èåˆæ–¹æ¡ˆï¼šä¸‹ä¸€ä»£Agentè®°å¿†ç³»ç»Ÿæ¶æ„

### 4.1 æ ¸å¿ƒç»„ä»¶

åŸºäºMastraå’ŒOpenClawçš„ä¼˜ç¼ºç‚¹ï¼Œæˆ‘è®¾è®¡äº†ä¸€ä¸ªèåˆæ¶æ„ï¼š

```python
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ··åˆAgentè®°å¿†ç³»ç»Ÿæ¶æ„                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   æ™ºèƒ½è·¯ç”±    â”‚ â†’ â”‚   æ··åˆæ£€ç´¢   â”‚ â†’ â”‚  è®°å¿†èåˆ    â”‚        â”‚
â”‚  â”‚ Intentåˆ†ç±»   â”‚   â”‚ BM25+å‘é‡    â”‚   â”‚ å¤šè·¯ç»“æœèåˆ â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â†“                   â†“                   â†“               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ ç‰ˆæœ¬æ§åˆ¶      â”‚   â”‚ å†²çªæ£€æµ‹      â”‚   â”‚ è‡ªé€‚åº”å‹ç¼©   â”‚        â”‚
â”‚  â”‚ å®Œæ•´å†å²è¿½è¸ª  â”‚   â”‚ çŸ›ç›¾/è¿‡æ—¶    â”‚   â”‚ é—å¿˜æ›²çº¿     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     å­˜å‚¨åç«¯                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚
â”‚  â”‚  â”‚  KVå­˜å‚¨  â”‚  â”‚ å‘é‡å­˜å‚¨ â”‚  â”‚ æ—¶åºç´¢å¼• â”‚  â”‚ æ–‡ä»¶ç³»ç»Ÿ â”‚      â”‚  â”‚
â”‚  â”‚  â”‚ (Redis) â”‚  â”‚(Milvus) â”‚  â”‚(TSDB)   â”‚  â”‚(Markdown)â”‚      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 æ··åˆæ£€ç´¢æ ¸å¿ƒç®—æ³•

```python
class HybridRetrievalEngine:
    """
    æ··åˆæ£€ç´¢å¼•æ“
    
    èåˆ Mastra çš„è§‚å¯Ÿå¼è®°å¿† + OpenClaw çš„æ··åˆæ£€ç´¢
    """
    
    async def retrieve(
        self,
        query: str,
        context: AgentContext
    ) -> List[RetrievalResult]:
        """
        æ ¸å¿ƒæ£€ç´¢æ–¹æ³•
        
        1. æ„å›¾æ¨æ–­
        2. å¤šè·¯å¹¶è¡Œæ£€ç´¢
        3. è‡ªé€‚åº”èåˆ
        """
        
        # Step 1: æ„å›¾æ¨æ–­
        intent = await self._infer_intent(query)
        
        # Step 2: å¤šè·¯å¹¶è¡Œæ£€ç´¢
        tasks = [
            self._exact_match(query, intent),       # ç²¾ç¡®åŒ¹é…
            self._semantic_search(query, intent),   # è¯­ä¹‰æœç´¢
            self._temporal_query(context),          # æ—¶åºæŸ¥è¯¢
        ]
        
        results = await asyncio.gather(*tasks)
        
        # Step 3: è‡ªé€‚åº”èåˆ
        return self._adaptive_fuse(
            results=results,
            intent=intent,
            context=context
        )
    
    def _adaptive_fuse(
        self,
        results: List,
        intent: str,
        context: AgentContext
    ) -> List[RetrievalResult]:
        """
        æ ¹æ®æ„å›¾è‡ªé€‚åº”è°ƒæ•´æƒé‡
        
        - fact: ç²¾ç¡®åŒ¹é… 50% + è¯­ä¹‰ 30% + æ—¶åº 20%
        - reasoning: è¯­ä¹‰ 70% + ç²¾ç¡® 20% + æ—¶åº 10%
        - contextual: æ—¶åº 40% + è¯­ä¹‰ 40% + ç²¾ç¡® 20%
        """
        weights = self._get_weights_by_intent(intent)
        
        fused = []
        for r in results:
            r.score = sum(
                r.score * weights[i]
                for i, r in enumerate(r)
            )
        
        return sorted(fused, key=lambda x: x.score, reverse=True)
```

### 4.3 è‡ªé€‚åº”å‹ç¼©ï¼ˆåŸºäºé—å¿˜æ›²çº¿ï¼‰

```python
class AdaptiveCompression:
    """
    è‡ªé€‚åº”å‹ç¼©
    
    ç»“åˆ Mastra çš„å‹ç¼©æ€æƒ³ + é—å¿˜æ›²çº¿æ¨¡å‹
    """
    
    HALF_LIFE = {
        'fact': 7 * 24 * 3600,       # 7å¤©
        'preference': 30 * 24 * 3600,  # 30å¤©
        'context': 1 * 24 * 3600,      # 1å¤©
        'skill': 90 * 24 * 3600,       # 90å¤©
    }
    
    def calculate_retention(
        self,
        category: str,
        last_access: float,
        current: float = None
    ) -> float:
        """
        è®¡ç®—ä¿¡æ¯ä¿ç•™ç‡
        
        retention = e^(-decay_rate * time)
        decay_rate = ln(2) / half_life
        """
        current = current or time.time()
        elapsed = current - last_access
        half_life = self.HALF_LIFE.get(category, 30 * 24 * 3600)
        
        decay = 0.693 / half_life
        retention = math.exp(-decay * elapsed)
        
        return retention
    
    def compress_by_retention(
        self,
        memory: Memory,
        retention: float
    ) -> CompressedMemory:
        """
        æ ¹æ®ä¿ç•™ç‡å‹ç¼©
        
        - retention > 0.8: ä¸å‹ç¼©
        - retention 0.5-0.8: è½»åº¦å‹ç¼©
        - retention 0.2-0.5: ä¸­åº¦å‹ç¼©
        - retention < 0.2: æ·±åº¦å‹ç¼©
        """
        pass
```

### 4.4 ç‰ˆæœ¬æ§åˆ¶ä¸å†²çªæ£€æµ‹

```python
class MemoryVersionEngine:
    """
    ç‰ˆæœ¬æ§åˆ¶å¼•æ“
    
    è§£å†³ï¼šè®°å¿†çš„ä¿¡ä»»é—®é¢˜ã€å¯è¿½æº¯æ€§
    """
    
    async def update(
        self,
        memory_id: str,
        new_content: str,
        reason: str = None
    ) -> MemoryVersion:
        """
        æ›´æ–°è®°å¿†ï¼ˆåˆ›å»ºæ–°ç‰ˆæœ¬ï¼‰
        
        1. ä¿å­˜å½“å‰ç‰ˆæœ¬å¿«ç…§
        2. è®¡ç®—å·®å¼‚
        3. æ ‡è®°å˜æ›´åŸå› 
        """
        current = await self.storage.get(memory_id)
        
        # åˆ›å»ºæ–°ç‰ˆæœ¬
        version = MemoryVersion(
            version_id=uuid.uuid4(),
            memory_id=memory_id,
            content=new_content,
            parent_version=current.version,
            diff=self._diff(current.content, new_content),
            reason=reason,
            timestamp=time.now()
        )
        
        # æ£€æµ‹å†²çª
        conflicts = await self.conflict_detector.detect(
            current.content,
            new_content
        )
        
        if conflicts:
            await self._flag_for_review(memory_id, conflicts)
        
        return version
```

---

## äº”ã€æ€§èƒ½å¯¹æ¯”

### 5.1 æ£€ç´¢å‡†ç¡®ç‡

| ç³»ç»Ÿ | LongMemEval | å¤‡æ³¨ |
|------|-------------|------|
| Mastra Observational (GPT-5-mini) | 94.87% | SOTA |
| Mastra Observational (GPT-4o) | 84.23% | SOTA |
| Mastra RAG | 80.05% | Baseline |
| ä¼ ç»Ÿ RAG | 60-75% | - |
| æ··åˆæ£€ç´¢æ–¹æ¡ˆ (é¢„ä¼°) | 85-90% | ç›®æ ‡ |

### 5.2 Tokenæˆæœ¬

| ç³»ç»Ÿ | Tokenå¼€é”€ | ç›¸å¯¹æˆæœ¬ |
|------|----------|---------|
| Mastra Observational | 1x | âœ… æœ€ä¼˜ |
| ä¼ ç»Ÿ RAG | ~10x | âŒ é«˜ |
| ç®€å•ä¸Šä¸‹æ–‡ä¼ é€’ | 5-20x | âŒ é«˜ |
| æ··åˆæ£€ç´¢æ–¹æ¡ˆ | 1.5-3x | â­ ç›®æ ‡ |

### 5.3 é€æ˜åº¦ä¸å¯æ§æ€§

| ç³»ç»Ÿ | é€æ˜åº¦ | å¯å®¡è®¡æ€§ | å¯ä¿®æ”¹æ€§ |
|------|--------|---------|---------|
| OpenClaw | âœ… å®Œå…¨é€æ˜ | âœ… æ–‡æœ¬ç¼–è¾‘å™¨ | âœ… ä»»æ„ä¿®æ”¹ |
| Mastra | âš ï¸ é»‘ç›’ | âš ï¸ æœ‰é™ | âš ï¸ APIæ§åˆ¶ |
| ä¼ ç»Ÿå‘é‡æ•°æ®åº“ | âš ï¸ é»‘ç›’ | âš ï¸ æŸ¥è¯¢æ¥å£ | âš ï¸ åˆ é™¤API |
| æ··åˆæ£€ç´¢æ–¹æ¡ˆ | âœ… å®Œæ•´æ—¥å¿— | âœ… ç‰ˆæœ¬å†å² | âœ… å¤šå±‚æ§åˆ¶ |

---

## å…­ã€2026å¹´æŠ€æœ¯è¶‹åŠ¿é¢„æµ‹

### 6.1 çŸ­æœŸï¼ˆ6ä¸ªæœˆå†…ï¼‰

```
è¶‹åŠ¿1: æ··åˆæ£€ç´¢æˆä¸ºæ ‡é…
â”œâ”€â”€ BM25 + å‘é‡èåˆ
â”œâ”€â”€ æ„å›¾è·¯ç”±è‡ªé€‚åº”
â””â”€â”€ æˆæœ¬æ•æ„Ÿåœºæ™¯ä¼˜å…ˆ

è¶‹åŠ¿2: å‹ç¼©æŠ€æœ¯çˆ†å‘
â”œâ”€â”€ é—å¿˜æ›²çº¿åº”ç”¨
â”œâ”€â”€ ä¸»åŠ¨å‹ç¼©vsè¢«åŠ¨å‹ç¼©
â””â”€â”€ Tokenæˆæœ¬ä¸‹é™50%+

è¶‹åŠ¿3: å¯å®¡è®¡æ€§éœ€æ±‚å¢é•¿
â”œâ”€â”€ è®°å¿†ç‰ˆæœ¬æ§åˆ¶
â”œâ”€â”€ å˜æ›´è¿½è¸ª
â””â”€â”€ åˆè§„è¦æ±‚
```

### 6.2 ä¸­æœŸï¼ˆ1-2å¹´ï¼‰

```
è¶‹åŠ¿4: è§‚å¯Ÿå¼è®°å¿†æ™®åŠ
â”œâ”€â”€ è¢«åŠ¨å¼å­¦ä¹ 
â”œâ”€â”€ åŠ¨æ€é‡è¦æ€§åˆ¤æ–­
â””â”€â”€ ä¸Šä¸‹æ–‡çª—å£çªç ´

è¶‹åŠ¿5: å¤šæ¨¡æ€è®°å¿†
â”œâ”€â”€ å›¾åƒ+æ–‡æœ¬è”åˆå­˜å‚¨
â”œâ”€â”€ è§†é¢‘æ—¶åºè®°å¿†
â””â”€â”€ è·¨æ¨¡æ€æ£€ç´¢

è¶‹åŠ¿6: è¾¹ç¼˜éƒ¨ç½²
â”œâ”€â”€ æœ¬åœ°å‘é‡æ•°æ®åº“
â”œâ”€â”€ éšç§ä¼˜å…ˆ
â””â”€â”€ ä½å»¶è¿Ÿè¦æ±‚
```

---

## ä¸ƒã€ç»“è®º

### 7.1 æ ¸å¿ƒè§‚ç‚¹

1. **RAGä¸æ˜¯ç»ˆç‚¹**ï¼šä¼ ç»ŸRAGåœ¨Agentåœºæ™¯æ‰è¥Ÿè§è‚˜
2. **æ··åˆæ–¹æ¡ˆæœ€ä¼˜**ï¼šMastra+OpenClawèåˆæ˜¯æ­£ç¡®æ–¹å‘
3. **é€æ˜å³ä¿¡ä»»**ï¼šå¯å®¡è®¡ã€å¯ä¿®æ”¹æ˜¯ç”Ÿäº§ç³»ç»Ÿåˆšéœ€
4. **æˆæœ¬æ˜¯ç¡¬çº¦æŸ**ï¼šå‹ç¼©å’Œé€‰æ‹©æ€§æ£€ç´¢å¿…é¡»åšå¥½

### 7.2 å»ºè®®

| åœºæ™¯ | æ¨èæ–¹æ¡ˆ |
|------|---------|
| ä¸ªäººåŠ©ç† | OpenClawå¼ï¼šé€æ˜+æœ¬åœ° |
| ä¼ä¸šåº”ç”¨ | Mastraå¼ï¼šå‹ç¼©+äº‘ç«¯ |
| é«˜åˆè§„åœºæ™¯ | æ··åˆæ–¹æ¡ˆï¼šå®Œæ•´å®¡è®¡+ç‰ˆæœ¬æ§åˆ¶ |
| æˆæœ¬æ•æ„Ÿ | æ··åˆæ£€ç´¢+è‡ªé€‚åº”å‹ç¼© |

### 7.3 ä¸‹ä¸€æ­¥

åŸºäºæœ¬æ–‡åˆ†æï¼Œseekdb-js è®°å¿†ç³»ç»Ÿçš„ä¼˜å…ˆçº§åº”è¯¥æ˜¯ï¼š

1. âœ… æ··åˆæ£€ç´¢å¼•æ“ï¼ˆæ ¸å¿ƒå·®å¼‚åŒ–ï¼‰
2. âœ… ç‰ˆæœ¬æ§åˆ¶ï¼ˆä¿¡ä»»åŸºç¡€ï¼‰
3. ğŸ”„ å†²çªæ£€æµ‹ï¼ˆç—›ç‚¹ï¼‰
4. â³ è‡ªé€‚åº”å‹ç¼©ï¼ˆæˆæœ¬ä¼˜åŒ–ï¼‰
5. â³ è§‚å¯Ÿå¼è®°å¿†ï¼ˆé•¿æœŸæ–¹å‘ï¼‰

---

## å‚è€ƒèµ„æ–™

1. [Mastra Observational Memory SOTA](https://supergok.com/mastra-observational-memory/)
2. [OpenClawæ¶æ„åˆ†æ - V2EX](https://v2ex.com/t/1191295)
3. [Comparing File Systems and Databases for Agent Memory - Oracle](https://medium.com/oracledevs/comparing-file-systems-and-databases-for-effective-ai-agent-memory-management-5322ac45f3b6)
4. [DuckDB Agent Memory - Medium](https://medium.com/@sparknp1/duckdb-agent-memory-that-you-can-actually-trust-5b0beb68df40)
5. [RAG to Agent Transformation](https://ragaboutit.com/the-rag-to-agent-transformation-why-static-retrieval-systems-are-getting-replaced-by-orchestrated-intelligence/)

---

*æœ¬æ–‡ç”± seekdb-js Agent Memory System ç ”ç©¶å›¢é˜Ÿæ’°å†™*
